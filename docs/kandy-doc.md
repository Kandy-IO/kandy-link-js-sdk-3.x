<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## create

The SDK creation factory. Create an instance of the SDK by calling this factory with the desired configurations.
The SDK instance will be refered as 'api' throughout the rest of the documentation content.

**Parameters**

-   `config` **[config][1]** The configuration object.

**Examples**

```javascript
// Instantiate the SDK.
import { create } from 'kandy'
const client = create({
    authentication: { ... },
    logs: { ... },
    ...
});
// Use the SDK's API.
client.on( ... );
```

Returns **[api][2]** The SDK instance.

## config

The configuration object. This object defines what different configuration
values you can use when instantiating the SDK using the [create][3] function.

### config.logs

Configuration options for the Logs feature.

The SDK will log information about the operations it is performing. The
   amount of information will depend on how the Logs feature is configured.

The format of logs can also be customized by providing a
   [LogHandler][4]. This function will receive a
   [LogEntry][5] which it can handle as it sees fit. By
   default, the SDK will log information to the console.

**Parameters**

-   `logs` **[Object][6]** Logs configs.
    -   `logs.logLevel` **[string][7]** Log level to be set. See [logger.levels][8]. (optional, default `'debug'`)
    -   `logs.handler` **[logger.LogHandler][9]?** The function to receive log entries from the
           SDK. If not provided, a default handler will be used that logs entries
           to the console.
    -   `logs.enableFcsLogs` **[boolean][10]** Enable the detailed call logger
           for v3.X. Requires log level debug. (optional, default `true`)
    -   `logs.logActions` **[Object][6]?** Options specifically for action logs when
           logLevel is at DEBUG+ levels. Set this to false to not output action logs.
        -   `logs.logActions.handler` **[logger.LogHandler][9]?** The function to receive action
               log entries from the SDK. If not provided, a default handler will be used
               that logs actions to the console.
        -   `logs.logActions.actionOnly` **[boolean][10]** Only output information
               about the action itself. Omits the SDK context for when it occurred. (optional, default `true`)
        -   `logs.logActions.collapsed` **[boolean][10]** Whether logs should be
               minimized when initially output. The full log is still output and can be
               inspected on the console. (optional, default `false`)
        -   `logs.logActions.diff` **[boolean][10]** Include a diff of what SDK
               context was changed by the action. (optional, default `false`)
        -   `logs.logActions.exposePayloads` **[boolean][10]** Allow action payloads
               to be exposed in the logs, potentially displaying sensitive information. (optional, default `false`)

### config.authentication

Configuration options for the Authentication feature.

**Parameters**

-   `authentication` **[Object][6]** Authentication configs.
    -   `authentication.subscription` **[Object][6]** 
        -   `authentication.subscription.server` **[string][7]** Hostname of the server to be used for subscription requests.
        -   `authentication.subscription.protocol` **[string][7]** Protocol to be used for subscription requests. (optional, default `https`)
        -   `authentication.subscription.port` **[Number][11]** Port to be used for subscription requests. (optional, default `443`)
        -   `authentication.subscription.version` **[string][7]** Version of the REST API to be used. (optional, default `1`)
        -   `authentication.subscription.expires` **[Number][11]** Time duration, in seconds, until a subscription should expire. (optional, default `3600`)
        -   `authentication.subscription.service` **[Array][12]?** Services to subscribe to for notifications.
    -   `authentication.websocket` **[Object][6]** 
        -   `authentication.websocket.server` **[string][7]** Hostname of the server to be used for websocket notifications.
        -   `authentication.websocket.protocol` **[string][7]** Protocol to be used for websocket notifications. (optional, default `wss`)
        -   `authentication.websocket.port` **[Number][11]** Port to be used for websocket notifications. (optional, default `443`)

### config.call

Configuration options for the call feature.

**Parameters**

-   `call` **[Object][6]** The call configuration object.
    -   `call.callDefaults` **[Object][6]?** Default options to be used when making/answering a call.
        -   `call.callDefaults.isAudioEnabled` **[boolean][10]** Specifies whether audio is enabled or not. (optional, default `true`)
        -   `call.callDefaults.isVideoEnabled` **[boolean][10]** Specifies whether video is enabled or not. (optional, default `true`)
        -   `call.callDefaults.sendInitialVideo` **[boolean][10]** Specifies whether to send an inital video stream or not. (optional, default `false`)
        -   `call.callDefaults.remoteVideoContainer` **[Object][6]?** Specifies the container where video (coming from remote party) is rendered.
        -   `call.callDefaults.localVideoContainer` **[Object][6]?** Specifies the container where video (coming from local party) is rendered.
    -   `call.chromeExtensionId` **[string][7]?** ID of the screenshare extension being used for screenshare of Google Chrome.
    -   `call.recordCallStats` **[boolean][10]** Whether to enable the recording of call statistics as part of app's local storage. (optional, default `false`)
    -   `call.earlyMedia` **[boolean][10]** Whether to use early media (e.g. for playing incoming tones) as part of an outgoing call. (optional, default `false`)
    -   `call.callAuditTimer` **[number][11]** Audit time value for calls, as a positive number in milliseconds. (optional, default `30000`)
    -   `call.activeCallTimeoutMS` **[number][11]** Timeout for an existing ringing call before it gets terminated, as a positive number in milliseconds. (optional, default `120000`)
    -   `call.ringingFeedback` **[boolean][10]?** When enabled, inform Spidr that RingingFeedback is supported.
    -   `call.codecsToReplace` **[string][7]?** Specifies alternative audio/video codecs to use for a given call. It has been deprecated so pipeline parameter should be used instead.
    -   `call.videoInactiveOnHold` **[boolean][10]** Sets the video as "inactive" instead of "sendonly" when holding a call. (optional, default `false`)
    -   `call.forceDisableMediaOnHold` **[boolean][10]** Disables any type of media (e.g. Comfort Noise) from transmitting when call is held locally. (optional, default `false`)
    -   `call.iceCandidateCollectionTimeoutInterval` **[number][11]** When provided (in milliseconds), ice candidate collection is assumed to be completed if at least one candidate is received within the interval. (optional, default `3000`)
    -   `call.relayCandidateCollectionTimeoutCycle` **[boolean][10]** When enabled, iceCandidateCollectionTimeoutInterval is restarted until receiving first relay candidate. If the provided cycle limit is reached, ice candidate collection assumed to be completed. (optional, default `false`)
    -   `call.recordCallStats` **[boolean][10]** When enabled, call statistics are recorded in app's localstorage after the call is terminated. (optional, default `false`)
    -   `call.callConstraints` **[Object][6]?** Custom RTCPeerConnection constraints to use for calls. Will cause errors if malformed.
        -   `call.callConstraints.chrome` **[Object][6]?** Custom constraints to be used on Google Chrome.
        -   `call.callConstraints.firefox` **[Object][6]?** Custom constraints to be used on Mozilla Firefox.
    -   `call.bundlePolicy` **[string][7]** The bundle policy to use for peer connections. Value can be fcs.SDP_CONSTANTS.BUNDLE_POLICY.MAX_COMPAT, fcs.SDP_CONSTANTS.BUNDLE_POLICY.MAX_BUNDLE, fcs.SDP_CONSTANTS.BUNDLE_POLICY.BALANCED or fcs.SDP_CONSTANTS.BUNDLE_POLICY.DISABLED. The DISABLED option means that bundle group lines will be removed from every SDP. (optional, default `'DISABLED'`)
    -   `call.opusConfig` **[Object][6]?** Bandwidth controls to add for Opus audio codec.
        -   `call.opusConfig.maxPlaybackRate` **[number][11]?** Maximum playback rate, in bits per second. Must be a positive value between 8000 and 48000.
        -   `call.opusConfig.maxAverageBitrate` **[number][11]?** A bitrate encoding value between 6000 and 510000 bits per second.
        -   `call.opusConfig.fec` **[number][11]?** Specifies whether Forward Error Correction is enabled or not. When enabled, FEC provides robustness against packet loss. Acceptable values can only be 0 or 1.
        -   `call.opusConfig.dtx` **[number][11]?** Specifies whether Discontinuous Transmission mode is enabled or not. When enabled, DTX reduces the bitrate during silence or background noise. Acceptable values can only be 0 or 1.
        -   `call.opusConfig.ptime` **[number][11]?** Packet (i.e. frame) duration in milliseconds. Frames will be combined into packets to achieve the maximum of 120 ms duration. A positive value between 2.5 and 120.
    -   `call.webrtcLogCollectionInterval` **[number][11]** Interval at which to collect WebRTC logs for calls, in milliseconds. (optional, default `3000`)
    -   `call.useRelay` **[boolean][10]** Whether we should force connection through the relay candidates (i.e. TURN server). Mostly used for testing. (optional, default `false`)
    -   `call.trickleIceSupport` **[string][7]** Whether we should advertise and use Trickle ICE. Accepted value is one of: 'none', 'half' or 'full'. (optional, default `'none'`)
    -   `call.continuity` **[boolean][10]** Whether an existing voice call can be persisted, as a mobile phone moves between circuit switched and packet switched domains (e.g. GSM to WiFi). (optional, default `false`)
    -   `call.resyncOnConnect` **[boolean][10]** Whether all active calls should be resynched upon connecting or reconnecting to the websocket (requires Kandy Link 4.7.1+). (optional, default `false`)

### config.connectivity

Configuration options for the Connectivity feature.
The SDK can only use keepalive as the connectivity check.

Keep Alive: The client sends "keepalive" messages (to the server) on the websocket at regular intervals. This lets the server know that the client is still connected, and that it should "keep the connection alive".

For more information on keepalive see here: [https://en.wikipedia.org/wiki/Keepalive][13]

**Parameters**

-   `connectivity` **[Object][6]** Connectivity configs.
    -   `connectivity.pingInterval` **[Number][11]** Time in between websocket ping attempts (milliseconds). (optional, default `30000`)
    -   `connectivity.reconnectLimit` **[Number][11]** Number of failed reconnect attempts before reporting an error. Can be set to 0 to not limit reconnection attempts. (optional, default `5`)
    -   `connectivity.reconnectDelay` **[Number][11]** Base time between websocket reconnect attempts (milliseconds). (optional, default `5000`)
    -   `connectivity.reconnectTimeMultiplier` **[Number][11]** Reconnect delay multiplier for subsequent attempts. The reconnect delay time will be multiplied by this after each failed reconnect attempt to increase the delay between attempts. eg. 5000ms then 10000ms then 20000ms delay if value is 2. (optional, default `1`)
    -   `connectivity.reconnectTimeLimit` **[Number][11]** Maximum time delay between reconnect attempts (milliseconds). Used in conjunction with the reconnect time multiplier to prevent overly long delays between reconnection attempts. (optional, default `640000`)
    -   `connectivity.autoReconnect` **[Boolean][10]** Flag to determine whether the SDK will attempt to automatically reconnect after connectivity disruptions. (optional, default `true`)
    -   `connectivity.maxMissedPings` **[Number][11]** Maximum pings sent (without receiving a response) before reporting an error. (optional, default `3`)
    -   `connectivity.checkConnectivity` **[Boolean][10]** Flag to determine whether the SDK should check connectivity. (optional, default `true`)
    -   `connectivity.webSocketOAuthMode` **[string][7]** query will send the bearer access token to authenticate the websocket and none will not send it. (optional, default `query`)

### config.notifications

Configuration options for the notification feature.

**Parameters**

-   `notifications` **[Object][6]** The notifications configuration object.
    -   `notifications.idCacheLength` **[number][11]** Default amount of event ids to remember for de-duplication purposes. (optional, default `100`)
    -   `notifications.incomingCallNotificationMode` **[string][7]** Communication channel mode used for incoming call notifications. Supported values are 'any-channel' or 'push-channel-only'. (optional, default `'any-channel'`)
    -   `notifications.pushRegistration` **[Object][6]?** Object describing the server to use for push services.
        -   `notifications.pushRegistration.server` **[string][7]?** Hostname for the push registration server.
        -   `notifications.pushRegistration.port` **[string][7]?** Port for the push registration server.
        -   `notifications.pushRegistration.protocol` **[string][7]?** Protocol for the push registration server.
        -   `notifications.pushRegistration.version` **[string][7]?** Version for the push registration server.

## devices:change

Available media devices have been changed.

**Parameters**

-   `params` **[Object][6]** 
    -   `params.devices` **[Object][6]** The devices, seperated by device type.

## devices:defaultsChange

A change has been made to default devices used for calls.

**Parameters**

-   `params` **[Object][6]** 
    -   `params.devices` **[Object][6]** The devices now set as default.

## media:initialize

Media support has been checked.

**Parameters**

-   `params` **[Object][6]** 
    -   `params.result` **[Object][6]** Results of initializing media.
        -   `params.result.error` **[boolean][10]** Whether the initiazation was successful or not.
        -   `params.result.code` **[number][11]** A unqiue code describing the result scenario.
        -   `params.result.message` **[string][7]** Human readable message of the result.

## videoPreview:change

The status of previewing local video has changed.

**Parameters**

-   `params` **[Object][6]** 
    -   `params.displaying` **[boolean][10]** Whether the local video preview is being displayed or not.

## videoPreview:error

An error has occurred when changing local video preview status.

**Parameters**

-   `params` **[Object][6]** 
    -   `params.error` **[api.BasicError][14]** Information about the error.

## api

The 'api' is the type returned by the create function.
It contains various top-level functions that pertain to SDK global instance
as well as several nested namespaces that pertain to various features (e.g. call, contacts, presence, etc).

### getVersion

Returns the current version of the API.

### destroy

Destroys the SDK, and removes its state, rendering the SDK unusable.
Useful when a user logs out and their call data needs to be destroyed.
The SDK must be recreated to be usable again.

**Examples**

```javascript
// Instantiate the SDK.
import { create } from 'kandy'
const config = {
    authentication: { ... },
    logs: { ... },
    ...
}
let client = create(config);
client.on( ... )
// Use the SDK
...
// Destroy the SDK, then recreate on the next step
client.destroy()
client = create(config)
client.on( ... )
```

### getConfig

Gets the current configuration Object. This is the object that is initially set as part of SDK creation using 'create' function.

Returns **[Object][6]** A configuration Object.

### updateConfig

Update values in the global Config section of the store. The values pertain to the SDK configuration.

**Parameters**

-   `newConfigValues` **[Object][6]** Key-value pairs that will be placed into the store. See [config][15] for details on what key-value pairs are available for use.

### on

Add an event listener for the specified event type. The event is emmited by the SDK instance.

**Parameters**

-   `type` **[string][7]** The event type for which to add the listener.
-   `listener` **[Function][16]** The listener for the event type. The parameters of the listener depend on the event type.

**Examples**

```javascript
// Listen for events of a specific type emitted by the SDK.
client.on('dummy:event', function (params) {
   // Handle the event.
})
```

-   Throws **[Error][17]** Invalid event type

### off

Removes an event listener for the specified event type. The event is emmited by the SDK instance.

**Parameters**

-   `type` **[string][7]** The event type for which to remote the listener.
-   `listener` **[Function][16]** The listener to remove.


-   Throws **[Error][17]** Invalid event type

### subscribe

Adds a global event listener to SDK instance.

**Parameters**

-   `listener` **[Function][16]** The event listener to add. The parameters are (type, ...args), where args depend on the event type.


-   Throws **[Error][17]** Listener not a function

### unsubscribe

Removes a global event listener from SDK instance.

**Parameters**

-   `listener` **[Function][16]** The event listener to remove.


-   Throws **[Error][17]** Listener not a function

### connect

Connect with user credentials to any backend services that the SDK instance deals with.

**Parameters**

-   `credentials` **[Object][6]** The credentials object.
    -   `credentials.username` **[string][7]** The username including the application's domain.
    -   `credentials.password` **[string][7]** The user's password.
    -   `credentials.authname` **[string][7]?** The user's authorization name.
-   `options` **[Object][6]?** The options object for non-credential options.
    -   `options.forceLogOut` **[boolean][10]?** Force the oldest connection to log out if too many simultaneous connections. Link only.
    -   `options.clientCorrelator` **[string][7]?** Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.

**Examples**

```javascript
client.connect({
  username: 'alfred@example.com',
  password: '********'
  authname: '********'
}, {
  forceLogOut: true
});
```

### connect

Connect by providing a username and HMAC token. This connects to any backend services that the SDK instance deals with.
An HMAC token is used to verify a user via the user's authorization within an organization.
HMAC tokens are generated by using the HmacSHA1 algorithm and a key on a data object
containing an `authenticationTokenRequest` object with the following properties:

-   subscriberId - The user's subscriber ID in the organization.
-   organizationId - The ID of the organization the user is a part of.

**Parameters**

-   `credentials` **[Object][6]** The credentials object.
    -   `credentials.username` **[string][7]** The username.
    -   `credentials.hmacToken` **[string][7]** An HMAC token for the user with the provided user ID.
-   `options` **[Object][6]?** The options object for non-credential options.
    -   `options.forceLogOut` **[boolean][10]?** Force the oldest connection to log out if too many simultaneous connections.
    -   `options.clientCorrelator` **[string][7]?** Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.

**Examples**

```javascript
const hmacToken = HmacSHA1Algorithm({
  authenticationTokenRequest: {
    subscriberId: 'alfred',
    organizationId: 'example.com'
  }
}, key)

client.connect({
  username: 'alfred@example.com',
  hmacToken
}, {
  forceLogOut: true
});
```

### disconnect

Disconnects from the backend. This will close the websocket and you will stop receiving events.

### updateConnection

Updates the current connection.

**Parameters**

-   `connection` **[Object][6]** 
    -   `connection.services` **[Array][12]** Services to subscribe to for notifications.

**Examples**

```javascript
client.updateConnection({
  services: ['IM', 'Presence', 'call']
})
```

### getUserInfo

Retrieves information about the current user.

Returns **[Object][6]** user The user data.

Returns **[string][7]** user.username The username of the current user. Note that this username can take different encoded forms.
                                It's not meant to be displayed to a user.

Returns **[string][7]** user.token The current access token.

### getConnection

Get the connection state.

Returns **[Object][6]** connection The connection state.

Returns **[boolean][10]** connection.isConnected Whether the authenticated user is currently connected.

Returns **[boolean][10]** connection.isPending Whether the authenticated user's connection is currently pending.

Returns **[Object][6]** connection.error The error object if an error occured.

Returns **[string][7]** connection.error.message The error message.

Returns **[string][7]** connection.error.stack The stack trace of the error.

### getServices

Retrieves the services that the user is subscribed for.

Returns **[Array][12]** A list of subscribed-to services.

### subscriptionStates

Possible subscription states of the user.

**Properties**

-   `FULL` **[string][7]** All requested feature subscriptions exist.
-   `PARTIAL` **[string][7]** Some feature subscriptions exist.
-   `NONE` **[string][7]** No feature subscriptions exist.

### disconnectReasons

Possible reasons for disconnecting.

**Properties**

-   `GONE` **[string][7]** Connection was terminated by the server
-   `LOST_CONNECTION` **[string][7]** Internet connection was lost

### setCredentials

Sets the username and HMAC token necessary to make requests to the platform.
An HMAC token is used to verify a user via the user's authorization within an of organization.
HMAC tokens are generated by using the HmacSHA1 algorithm and a key on a data object
containing an `authenticationTokenRequest` object with the following properties:

-   subscriberId - The user's subscriber ID in the organization.
-   organizationId - The ID of the organization the user is a part of.

**Parameters**

-   `credentials` **[Object][6]** The credentials object.
    -   `credentials.username` **[string][7]** The username.
    -   `credentials.hmacToken` **[string][7]** An HMAC token for the user with the provided user ID.

**Examples**

```javascript
const hmacToken = HmacSHA1Algorithm({
  authenticationTokenRequest: {
    subscriberId: 'alfred',
    organizationId: 'example.com'
  }
}, key)

client.setCredentials({
  username: 'alfred@example.com',
  hmacToken
});
```

### setCredentials

Sets the user credentials necessary to make requests to the platform.

**Parameters**

-   `credentials` **[Object][6]** The credentials object.
    -   `credentials.username` **[string][7]** The username including the application's domain.
    -   `credentials.password` **[string][7]** The user's password.
    -   `credentials.authname` **[string][7]?** The user's authorization name.

**Examples**

```javascript
client.setCredentials({
  username: 'alfred@example.com',
  password: '********'
  authname: '********'
});
```

### BasicError

The Basic Error object. Provides information about an error that occurred in the SDK.

Type: [Object][6]

**Properties**

-   `code` **[string][7]** The code of the error. If no code is known, this will be 'NO_CODE'.
-   `message` **[string][7]** A human-readable message to describe the error. If no message is known, this will be 'An error occured'.

## AudioBridge

The audio bridge feature allows multiple audio calls to be bridged together
for a local three-way call.

Audio bridge functions are all part of the 'audioBridge' namespace.

### create

Creates a local bridge that can be used to join audio calls.

Returns **[string][7]** ID used to identify the bridge.

### close

Closes an existing audio bridge.

**Parameters**

-   `bridgeId` **[string][7]** Identifier for the bridge to act on.

### addCall

Adds a call to the specified local audio bridge.

**Parameters**

-   `bridgeId` **[string][7]** Identifier for the bridge to act on.
-   `callId` **[string][7]** Identifier for the call to add.

### removeCall

Remove a specified call from the local audio bridge.

**Parameters**

-   `bridgeId` **[string][7]** Identifier for the bridge to act on.
-   `callId` **[string][7]** Identifier for the call to remove.

### mute

Mute the local audio for all of the calls on the bridge.

**Parameters**

-   `bridgeId` **[string][7]** Identifier for the bridge to act on.

### unmute

Unmute the local audio for all of the calls on the bridge.

**Parameters**

-   `bridgeId` **[string][7]** Identifier for the bridge to act on.

### silence

Silence the remote audio for all of the calls on the bridge.

**Parameters**

-   `bridgeId` **[string][7]** Identifier for the bridge to act on.

### unsilence

Un-silence the remote audio for all of the calls on the bridge.

**Parameters**

-   `bridgeId` **[string][7]** Identifier for the bridge to act on.

### getAll

Retrieve information about audio bridges.

Returns **[Array][12]** List of active audio bridges.

### getBridgeCalls

Retrieve all calls currently part of an audio bridge.

**Parameters**

-   `bridgeId` **[string][7]** The ID of the bridge whose calls we wish to retrieve

Returns **[Array][12]** List of calls currently part of the specified audio bridge.

## callHistory

The 'call.history' namespace is used to retrieve and inspect the authenticated
users call logs.

Functions below are all part of this namespace.

### fetch

Fetches the list of call logs and stores them locally. The API
`getCallLogs` can then be used to get the logs from local state after
it has been updated.

**Parameters**

-   `amount` **[number][11]** The number of records to retrieve. (optional, default `50`)
-   `offset` **[number][11]** Starting offset for records to retrieve. (optional, default `0`)

### remove

Deletes the specified call log.

**Parameters**

-   `recordId` **[number][11]** The ID of the call log to be removed.

### clear

Deletes all call logs.

### get

Gets the list of call logs cached locally. The event
`callHistory:changed` is used to indicate the local state of logs
has been updated.

**Examples**

```javascript
client.on('callHistory:change', function() {
    // Get all call logs when they've been updated.
    let callLogs = client.call.history.get();
});
```

Returns **[Array][12]** A list of call log records, ordered by latest first.

### getCache

Gets the cached call history data and returns stringified data.

Returns **[string][7]** A stringified list of call log records from the cache, ordered by latest first.

### setCache

Sets the cached call history data, expects stringified data as it will be parsed.

**Parameters**

-   `data` **[string][7]** The stringified call history data to store in the cache.

## Calls

The Calls feature is used to make audio and video calls to and from
SIP users and PSTN phones.

Call functions are all part of the 'call' namespace.

Whenever 'user' is mentioned as input parameter within this API, it needs to be provided in the user@domain format.

### getAll

Retrieves the state of calls made during the current session.

**Examples**

```javascript
let calls = client.call.getAll();
let currentCalls = calls.filter(call => {
    return call.state === client.call.states.IN_CALL;
});
```

Returns **[Array][12]** Call objects.

### getById

Retrieves a call from state with a specific call ID.

**Parameters**

-   `callId` **[string][7]** The ID of the call to retrieve.

Returns **[Object][6]** A call object.

### changeInputDevices

Changes camera and microphone for the specified call.
The call will use the current selected default devices.

**Parameters**

-   `callId` **[string][7]** The ID of the call to act upon.

### changeSpeaker

Changes speaker used for call audio output.
Supported on browser's that support HTMLMediaElement.setSinkId().

**Parameters**

-   `speakerId` **[string][7]** ID of the speaker to use for call audio.

### states

States of a call.

**Properties**

-   `IN_CALL` **[string][7]** The call is on-going.
-   `RINGING` **[string][7]** The call has been established and is waiting for a user response.
-   `ENDED` **[string][7]** The call has been terminated.
-   `ON_HOLD` **[string][7]** The call has been put on hold locally.
-   `ON_REMOTE_HOLD` **[string][7]** The call has been put on hold remotely.

**Examples**

```javascript
client.on('call:stateChange', function(callInfo) {
     if(callInfo.state === client.call.states.ENDED) {
         // Call has ended.
     }
});
```

### mediaStates

State of the media connection within a call.

**Properties**

-   `NEW` **[string][7]** A new media connection process has started.
-   `CHECKING` **[string][7]** Media is searching for a connection.
-   `CONNECTED` **[string][7]** Media has found a connection, but may still be searching for a better connection to use.
-   `COMLETED` **[string][7]** Media has finished searching and been established. Audio/video should now be flowing on the call.
-   `FAILED` **[string][7]** Media was not able to find a connection. Audio/video will not flow.
-   `DISCONNECTED` **[string][7]** The media connection has lost its connection and is trying to recover.
-   `CLOSED` **[string][7]** The media connection has shut down.

### make

Start an outgoing call.

**Parameters**

-   `callee` **[string][7]** Full user ID of the call recipient.
-   `options` **[Object][6]?** Call options.
    -   `options.from` **[string][7]?** Sets the display name of the caller to be sent alongside the username of the user.
    -   `options.isVideoEnabled` **[boolean][10]** Whether to enable video during the call. If false, you cannot start video mid-call. (optional, default `true`)
    -   `options.contact` **[Object][6]?** Object containing firstName and lastName of caller.
    -   `options.sendInitialVideo` **[boolean][10]** Whether to start the call sending the local video stream. (optional, default `false`)
    -   `options.isAudioEnabled` **[boolean][10]** Whether to enable audio during the call. Setting this to false will disable audio for the call. (optional, default `true`)
    -   `options.webrtcdtls` **[boolean][10]** Whether to enable DTLS for WebRTC calls. (optional, default `true`)
    -   `options.videoResolution` **[Object][6]?** The object to configure the local video resolution.
        -   `options.videoResolution.height` **[number][11]?** The height in pixels of the local video.
        -   `options.videoResolution.width` **[number][11]?** The width in pixels of the local video.
    -   `options.customParameters` **[Array][12]&lt;{name: [string][7], value: [string][7]}>?** Custom SIP header parameters for the SIP backend.
    -   `options.remoteVideoContainer` **[HTMLElement][18]?** The HTML element to use as a container for the remote video.
    -   `options.localVideoContainer` **[HTMLElement][18]?** The HTML element to use as a container for the local video.
    -   `options.normalizeAddress` **[boolean][10]** Whether to enable normalization of callee address. (optional, default `false`)

**Examples**

```javascript
let remoteContainer = document.getElementById('remote-container');
// Start a video call that only shows the remote media (not local).
let callId = client.call.make('sampleUser@example.com', {
    isVideoEnabled: true,
    sendInitialVideo: true,
    remoteVideoContainer: remoteContainer,
    customParameters: [
      {
        "name": "X-GPS",
        "value": "42.686032,23.344565"
      }
    ]
});
```

Returns **[string][7]** Id of the outgoing call.

### answer

Answer an incoming call.

**Parameters**

-   `callId` **[string][7]** The ID of the call to answer.
-   `options` **[Object][6]?** Call options.
    -   `options.isVideoEnabled` **[boolean][10]?** Whether to enable video during the call. If false, you cannot start video mid-call.
    -   `options.sendInitialVideo` **[boolean][10]?** Whether to start the call sending the local video stream.
    -   `options.isAudioEnabled` **[boolean][10]** Whether to enable audio during the call. Setting this to false will disable audio for the call. (optional, default `true`)
    -   `options.videoResolution` **[Object][6]?** The object to configure the local video resolution.
        -   `options.videoResolution.height` **[number][11]?** The height in pixels of the local video.
        -   `options.videoResolution.width` **[number][11]?** The width in pixels of the local video.
    -   `options.localVideoContainer` **[HTMLElement][18]?** The HTML element to use as a container for the local video.
    -   `options.remoteVideoContainer` **[HTMLElement][18]?** The HTML element to use as a container for the remote video.

### ignore

Ignore an incoming call.

**Parameters**

-   `callId` **[string][7]** The ID of the call to ignore.

### reject

Reject an incoming call.

**Parameters**

-   `callId` **[string][7]** The ID of the call to reject.

### end

End an on-going call.

**Parameters**

-   `callId` **[string][7]** Id of the call to end.

### mute

Mute the local audio stream on an ongoing call.

**Parameters**

-   `callId` **[string][7]** The ID of the call being acted on.

### unmute

Unmute the local audio stream on an ongoing call.

**Parameters**

-   `callId` **[string][7]** The ID of the call being acted on.

### silence

Silence the remote audio on an ongoing call.

**Parameters**

-   `callId` **[string][7]** The ID of the call being acted on.

### unsilence

Un-silence the remote audio on an ongoing call.

**Parameters**

-   `callId` **[string][7]** The ID of the call being acted on.

### getCustomParameters

Retrieves a call's customParameters.

**Parameters**

-   `callId` **[string][7]** The ID of the call to retrieve custom parameters.

Returns **[Array][12]&lt;{name: [string][7], value: [string][7]}>** Custom parameters of the call.

### setCustomParameters

Set custom parameters on an ongoing call.

**Parameters**

-   `callId` **[string][7]** The ID of the call being acted on.
-   `customParameters` **[Array][12]&lt;{name: [string][7], value: [string][7]}>** Custom parameters for the call.

**Examples**

```javascript
// Set custom parameters for call.
client.call.setCustomParameters(
   callId,
   [
     { "name": "X-GPS",
       "value": "42.686032,23.344565"
     }
   ]
});
```

### startVideo

Start local video stream for an ongoing call.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.
-   `options` **[Object][6]?** Options for the video stream.
    -   `options.videoResolution` **[Object][6]?** The video resolution configuation object.
        -   `options.videoResolution.height` **[number][11]?** The height of the outoing video in pixels.
        -   `options.videoResolution.width` **[number][11]?** The width of the outoing video in pixels.

### stopVideo

Stop local video for an ongoing call.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.

### hold

Put an ongoing call on hold.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.

### unhold

Return a held call to ongoing.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.

### startScreenshare

Starts sharing a screen over a call.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.
-   `options` **[Object][6]** 
    -   `options.mediaSourceId` **[string][7]** Id of the media screen to share.
    -   `options.height` **[Number][11]** The height of the video stream to send. (optional, default `768`)
    -   `options.width` **[Number][11]** The width of the video stream to send. (optional, default `1024`)
    -   `options.frameRate` **[Number][11]** The number of frames per second to request. (optional, default `15`)

### stopScreenshare

Stops sharing a screen over a call.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.

### sendDTMF

Send a DTMF tone over a call.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.
-   `tone` **[number][11]** DTMF tone to send. Valid values are [0,1,2,3,4,5,6,7,8,9,#].

### sendCustomParameters

Explicitly send the current custom parameters for a call.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.

### forwardCall

Forward an incoming call to another user.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.
-   `destination` **[string][7]** The user to forward the call to.

### directTransfer

Transfer a call to another user.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.
-   `destination` **[string][7]** The user to transfer the call to.

### consultativeTransfer

Transfer a call to another user.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.
-   `destinationCallId` **[string][7]** The callId to transfer the call to.

### join

Join two calls (both must be on hold and audio only). The joined call can be referenced via callId.

**Parameters**

-   `callId` **[string][7]** Id of the call being acted on.
-   `destinationCallId` **[string][7]** The callId to join the call with.

## clickToCall

The clickToCall namespace is used to bridge a call between two specified devices

### make

Attempts to establish a call between two specified devices

**Parameters**

-   `caller` **[string][7]** A string representing the person making the call
-   `callee` **[string][7]** A string representing the person receiving the call

Returns **[string][7]** callId A unique id representing the call

### get

Gets all local clickToCall calls

Returns **[Array][12]** A list of clickToCall records, ordered by earliest requestTime

## connection

The 'connection' namespace is used to connect and maintain connections between
the SDK and one or more backend servers.

### getSocketState

Get the state of the websocket.

**Parameters**

-   `platform` **[string][7]** Backend platform for which to request the websocket's state. (optional, default `'link'`)

### enableConnectivityChecking

Enables or disables connectivity checking.

**Parameters**

-   `enable` **[boolean][10]** Enable connectivity checking.

## contacts

The 'contacts' namespace allows users to store personal contacts to their account.

### add

Add a contact to a user's personal address book.
Will trigger the `contacts:new` event.

**Parameters**

-   `contact` **[Object][6]** The contact object.
    -   `contact.primaryContact` **[string][7]** The primary userId for the contact
    -   `contact.contactId` **[string][7]** The contact's unique contact ID
    -   `contact.firstName` **[string][7]?** The contact's first name
    -   `contact.lastName` **[string][7]?** The contact's last name
    -   `contact.photoUrl` **[string][7]?** The URL address identifying location of user's picture
    -   `contact.emailAddress` **[string][7]?** The contact's email address
    -   `contact.homePhone` **[string][7]?** The contact's home phone number
    -   `contact.workPhone` **[string][7]?** The contact's business phone number
    -   `contact.mobilePhone` **[string][7]?** The contact's mobile phone number
    -   `contact.conferenceURL` **[string][7]?** Conference URL and access code for this user's address book entry
    -   `contact.fax` **[string][7]?** The user's fax number
    -   `contact.pager` **[string][7]?** The user's pager number
    -   `contact.groupList` **[string][7]?** The name of the contact list for which to add this contact to ("friends" by default)
    -   `contact.friendStatus` **[boolean][10]?** Indicates whether or not the contact is a friend of the user

### get

Retrieves local information about a contact.

**Parameters**

-   `contactId` **[string][7]** The unique contact ID of the contact.

Returns **[Object][6]** Contact information.

### getAll

Retrieves local information about all contacts.

Returns **[Array][12]** List of contact information.

### refresh

Refreshes the local information about contacts. This will get new contacts from the platform.
Will trigger the `contacts:change` event.

### remove

Remove a contact from a personal address book.
Will trigger the `contacts:change` event.

**Parameters**

-   `id` **[string][7]** The Id of the contact that will be removed.

### update

Update a contact from the user's personal address book.
Will trigger the `contacts:change` event.

**Parameters**

-   `contact` **[Object][6]** The contact object.
    -   `contact.primaryContact` **[string][7]** The primary userId for the contact
    -   `contact.contactId` **[string][7]** The contact's unique contact ID
    -   `contact.firstName` **[string][7]?** The contact's first name
    -   `contact.lastName` **[string][7]?** The contact's last name
    -   `contact.photoUrl` **[string][7]?** The URL address identifying location of user's picture
    -   `contact.emailAddress` **[string][7]?** The contact's email address
    -   `contact.homePhone` **[string][7]?** The contact's home phone number
    -   `contact.workPhone` **[string][7]?** The contact's business phone number
    -   `contact.mobilePhone` **[string][7]?** The contact's mobile phone number
    -   `contact.conferenceURL` **[string][7]?** Conference URL and access code for this user's address book entry
    -   `contact.fax` **[string][7]?** The user's fax number
    -   `contact.pager` **[string][7]?** The user's pager number
    -   `contact.groupList` **[string][7]?** The name of the contact list for which to add this contact to ("friends" by default)
    -   `contact.friendStatus` **[boolean][10]?** Indicates whether or not the contact is a friend of the user

### fetch

Fetch a contact from the user's personal address book.
Will trigger the `contacts:change` event.

**Parameters**

-   `contactId` **[string][7]** The unique contact ID of the contact.

## conversation

The messaging feature revolves around a 'conversation' namespace. It is responsible to store the conversations
and its messages, and return conversation objects when requested.

See the "Conversation" and "Message" sections of the documentation for more details.

Messaging functions are all part of the 'conversation' namespace. Ex: client.conversation.get('id').

### get

Get a conversation object matching the user ID provided in the 'destination' parameter.
If successful, the event 'conversations:change' will be emitted.

This API will retrieve a conversation already existing in the store.

**Parameters**

-   `destination` **[string][7]** The destination for messages created in this conversation. This will
    be a user's sip address.
-   `options` **[Object][6]?** An optional configuration object to query for more specific results.
    If this object is not passed, the function will query for "im" conversation with that recipient.
    -   `options.type` **[string][7]?** The type of conversation to retrieve. Can be one of "im", "sms" or "other".

Returns **[conversation.Conversation][19]** A Conversation object matching the passed destination, otherwise undefined is returned.

### getAll

Returns all conversations currently tracked by the SDK

Returns **[Array][12]&lt;[conversation.Conversation][19]>** An array of conversation objects.

### Message

A Message object is a means by which a sender can deliver information to a recipient.

Creating and sending a message:

A message object can be obtained through the [Conversation.createMessage][20] API on an existing conversation.

Messages have Parts which represent pieces of a message, such as a text part, a json object part or a file part.
Once all the desired parts have been added to the message using the [Message.addPart][21] function,
the message can then be sent using the [Message.send][22] function.

Once the sender sends a message, this message is saved in sender's state as an object.
Similarly, once the recipient gets a message, this message is saved in recipient's state.

Retrieving a delivered message:

Once a message is delivered successfully, it can be
obtained through the [Conversation.getMessages][23] or [Conversation.getMessage][24] API on an existing conversation.

Below are the properties pertaining to the message object, returned by Conversation.getMessage(s) APIs, for either sender or recipient.

Type: [Object][6]

**Properties**

-   `timestamp` **[number][11]** A Unix timestamp in seconds marking the time when the message was created by sender.
-   `parts` **[Array][12]&lt;conversation.Part>** An array of Part Objects.
-   `sender` **[string][7]** The primary contact address of the sender.
-   `destination` **[Array][12]&lt;[string][7]>** An array of primary contact addresses associated with various destinations to which the message is meant to be delivered.
-   `messageId` **[string][7]** The unique id of the message. The message object (stored in sender's state) has a different id
    than the one associated with the message object stored in recipient's state.
-   `type` **[string][7]** The type of message that was sent. See [conversation.chatTypes][25] for valid types.
    This property applies only to message objects stored in sender's state.

#### send

Sends the message.

### Conversation

A Conversation object represents a conversation between either two users, or a
user and a group. A Conversation can create messages via the conversation's
[createMessage()][20] function.

Type: [Object][6]

**Properties**

-   `destination` **[string][7]** The id of the remote user with which the current user is having a conversation.

#### createMessage

Create and return a message object. You must provide a `text` part as demonstrated in the example.

**Parameters**

-   `part` **[Object][6]** The part to add to the message.
    -   `part.type` **[string][7]** The type of part. Must be "text".
    -   `part.text` **[string][7]** The text of the part. Must be a part of type "text".

**Examples**

```javascript
conversation.createMessage({type: 'text', text: 'This is the message'});
```

Returns **[conversation.Message][26]** The newly created Message object.

#### clearMessages

Clears all messages in this conversation from local state.

#### getMessages

Get the messages associated with this conversation.

Returns **[Array][12]&lt;[Object][6]>** messages An array containing the conversation's messages.

Returns **[Function][16]** messages.markRead Marks the message as read.

Returns **[Function][16]** messages.forward Forward the message to another user.

Returns **[string][7]** messages.messageId The Id of the message.

Returns **[string][7]** messages.sender The user Id of the user who sent the message.

Returns **[number][11]** messages.timestamp The time at which the message was sent.

Returns **[boolean][10]** messages.read Whether the message has been marked as read.

Returns **[boolean][10]** messages.isPending Whether the message has finished being sent to the server.

Returns **[Array][12]** messages.parts The parts of the message.

#### getMessage

Get a specific message from this conversation.

**Parameters**

-   `messageId` **[string][7]** ID of the message to retrieve.

Returns **[Object][6]** A message object.

#### subscribe

Subscribe to this conversations messages array.

**Parameters**

-   `subscriber` **[Function][16]** A subscriber function to be triggered when the messages array of this conversation is updated.
    -   `subscriber.destination` **[string][7]** The conversation participants.
    -   `subscriber.messageId` **[string][7]** The ID of the message that caused the event.

Returns **[Function][16]** The unsubscribe function.

#### fetchMessages

Allows the user to fetch messages associated with a specific conversation from the server.
When the operation is complete, a NEW_MESSAGE event will be emitted.
Messages can then be retrieved using getMessages.

**Parameters**

-   `amount` **[number][11]** An amount of messages to fetch. (optional, default `50`)

## DEVICE_ERROR

An error occurred while performing a device operation.

Type: [string][7]

**Parameters**

-   `params` **[Object][6]** 
    -   `params.error` **[api.BasicError][14]** The Basic error object.

## getDevices

Retrieves the available media devices for use.

## logger

The internal logger is used to provide information about the SDK's behaviour.
The logger can provide two types of logs: basic logs and action logs. Basic
logs are simple lines of information about what the SDK is doing during operations.
Action logs are complete information about a specific action that occurred
within the SDK, providing debug information describing it.
The amount of information logged can be configured as part of the SDK configuration.
See [config.logs][27] .

### levels

Possible levels for the SDK logger.

**Properties**

-   `SILENT` **[string][7]** Log nothing.
-   `ERROR` **[string][7]** Log only unhandled errors.
-   `WARN` **[string][7]** Log issues that may cause problems or unexpected behaviour.
-   `INFO` **[string][7]** Log useful information and messages to indicate the SDK's internal operations.
-   `DEBUG` **[string][7]** Log information to help diagnose problematic behaviour.

### LogEntry

A LogEntry object is the data that the SDK compiles when information is
   logged. It contains both the logged information and meta-info about when
   and who logged it.

A [LogHandler][4] provided to the SDK (see
   [config.logs][27]) will need to handle LogEntry
   objects.

Type: [Object][6]

**Properties**

-   `timestamp` **[number][11]** When the log was created, based on UNIX epoch.
-   `method` **[string][7]** The log function that was used to create the log.
-   `level` **[string][7]** The level of severity the log.
-   `target` **[Object][6]** The subject that the log is about.
    -   `target.type` **[string][7]** The type of the target. This is also
           used as part of the name of the Logger.
    -   `target.id` **[string][7]?** A unique identifer for the target.
    -   `target.name` **[string][7]** A combination of the target type and ID. If no
           id was provided, this will be the same as the type.
-   `messages` **[Array][12]** The logged information, given to the Logger
       method as parameters.
-   `timer` **[Object][6]?** Timing data, if the log method was a timer method.

**Examples**

```javascript
function defaultLogHandler (logEntry) {
  // Compile the meta info of the log for a prefix.
  const { timestamp, level, target } = logEntry
  let { method } = logEntry
  const logInfo = `${timestamp} - ${target.type} - ${level}`

  // Assume that the first message parameter is a string.
  const [log, ...extra] = logEntry.messages

  // For the timer methods, don't actually use the console methods.
  //    The Logger already did the timing, so simply log out the info.
  if (['time', 'timeLog', 'timeEnd'].includes(method)) {
    method = 'debug'
  }

  console[method](`${logInfo} - ${log}`, ...extra)
}
```

### LogHandler

A LogHandler can be used to customize how the SDK should log information. By
   default, the SDK will log information to the console, but a LogHandler can
   be configured to change this behaviour.

A LogHandler can be provided to the SDK as part of its configuration (see
   [config.logs][27]). The SDK will then provide this
   function with the logged information.

Type: [Function][16]

**Parameters**

-   `LogEntry` **[Object][6]** The LogEntry to be logged.

**Examples**

```javascript
// Define a custom function to handle logs.
function logHandler (logEntry) {
  // Compile the meta info of the log for a prefix.
  const { timestamp, level, target } = logEntry
  let { method } = logEntry
  const logInfo = `${timestamp} - ${target.type} - ${level}`

  // Assume that the first message parameter is a string.
  const [log, ...extra] = logEntry.messages

  // For the timer methods, don't actually use the console methods.
  //    The Logger already did the timing, so simply log out the info.
  if (['time', 'timeLog', 'timeEnd'].includes(method)) {
    method = 'debug'
  }

  console[method](`${logInfo} - ${log}`, ...extra)
}

// Provide the LogHandler as part of the SDK configurations.
const configs = { ... }
configs.logs.handler = logHandler
const client = create(configs)
```

## Media

The SDK's media features are used to control WebRTC Media Devices.

Media functions are all part of the 'media' namespace.

## notification

The 'notification' namespace allows user to register/deregister for/from push notifications as well as
enabling/disabling the processing of websocket notifications.

### process

Provides an external notification to the system for processing.

**Parameters**

-   `notification` **[Object][6]** 
-   `channel` **[string][7]?** The channel that the notification came from.

### registerApplePush

Registers with Apple push notification service. Once registration is successful, the application will be able to receive
standard and/or voip push notifications. It can then send these notifications to the SDK with [api.notifications.process][28]
in order for the SDK to process them.

**Parameters**

-   `params` **[Object][6]** 
    -   `params.services` **[Array][12]&lt;[string][7]>** Array of services for which we wish to receive notifications.
    -   `params.voipDeviceToken` **[string][7]** The voip device token used for voip push on iOS.
                                                 This token is required if registering for call service notifications on iOS.
    -   `params.standardDeviceToken` **[string][7]** The standardDevice token used for standard push on iOS .
                                                     This token is required when registering for non-call service notifications.
    -   `params.bundleId` **[string][7]** The bundleId to identify the application receiving the push notification.
    -   `params.clientCorrelator` **[string][7]** Unique identifier for a client device.
    -   `params.realm` **[string][7]** The realm used by the push registration service to identify and
                                       establish a connection with the service gateway.
    -   `params.isProduction` **[boolean][10]** If true, push notification will be sent to production.
                                               If false, push notification will be sent to sandbox.

Returns **[Promise][29]** When successful,  the information of the registration.
                  Promise will reject with error object otherwise.

### registerAndroidPush

Registers with Google push notification service. Once registration is successful, the application will be able to receive
standard and/or voip push notifications. It can then send these notifications to the SDK with [api.notifications.process][28]
in order for the SDK to process them.

**Parameters**

-   `params` **[Object][6]** 
    -   `params.services` **[Array][12]&lt;[string][7]>** Array of services to register for.
    -   `params.deviceToken` **[string][7]** The device token used for standard push on Android. This token is required
                                             when registering for all related services notifications.
    -   `params.bundleId` **[string][7]** The bundleId to identify the application receiving the push notification.
    -   `params.clientCorrelator` **[string][7]** Unique identifier for a client device.
    -   `params.realm` **[string][7]** The realm used by the push registration service to identify
                                       and establish a connection with the service gateway.

Returns **[Promise][29]** When successful,  the information of the registration.
                  Promise will reject with error object otherwise.

### unregisterApplePush

Unregister Apple push notifications.

**Parameters**

-   `registrationInfo` **[string][7]** The data returned from the push registration

Returns **[Promise][29]** When successful, the promise will resolve with undefined.
                  Promise will reject with error object otherwise.

### unregisterAndroidPush

Unregister Android push notifications.

**Parameters**

-   `registrationInfo` **[string][7]** The data returned from the push registration

Returns **[Promise][29]** When successful, the promise will resolve with undefined.
                  Promise will reject with error object otherwise.

### enableWebsocket

Enables, or disables, the processing of websocket notifications.

**Parameters**

-   `enable` **[boolean][10]** Whether the websocket channel should be enabled.

## presence

The 'presence' namespace provides an interface for an application to set the
   User's presence information and to track other Users' presence
   information.

Presence information is persisted by the server. When the SDK is initialized,
   there will be no information available. Presence information will become
   available either by using [presence.fetch][30] or by subscribing for
   updates about other Users, using [presence.subscribe][31].

Available presence information can be retrieved using [presence.get][32] or
   [presence.getAll][33].

### statuses

Possible status values.

**Properties**

-   `OPEN` **[string][7]** 
-   `CLOSED` **[string][7]** 

**Examples**

```javascript
const { statuses, activities } = client.presence
// Use the values when updating presence.
client.presence.update(statuses.OPEN, activities.AVAILABLE)
```

### activities

Possible activity values.

**Properties**

-   `AVAILABLE` **[string][7]** 
-   `IDLE` **[string][7]** 
-   `AWAY` **[string][7]** 
-   `LUNCH` **[string][7]** 
-   `BUSY` **[string][7]** 
-   `VACATION` **[string][7]** 
-   `ON_THE_PHONE` **[string][7]** 
-   `UNKNOWN` **[string][7]** 

### PresenceStatus

The PresenceStatus type defines the user's current status in terms of the user's availability to
communicate/respond to other users in the network.
An instance of this type can be obtained by invoking the [presence.get][32] function.

Reporting when a user is on the phone is enabled (by default), which means that presence update notifications
will be sent whenever a user is in a call, as well as when the call has ended.
This is a user preference enabled or disabled on server side, and it can only be changed on the server side.

The status is set to [open][34] as soon as a user subscribes for the presence service.

Type: [Object][6]

**Properties**

-   `userId` **[string][7]** The unique identifier for the user associated with this presence status.
-   `status` **[string][7]** The current status the user has set for themselves. For supported values see [presence.statuses][34].
-   `activity` **[string][7]** The current activity of the user.
         For supported values see [presence.activities][35].
-   `note` **[string][7]** Additional message acompanying the status & activity.
-   `loading` **[boolean][10]** Whether the presence information has been loaded or is in the process of loading.

### update

Updates the presence information for the current user.

See [presence.statuses][34] and [presence.activities][35] for valid
   values.

The SDK will emit a
   [presence:selfChange][36] event
   when the operation completes. The updated presence information is
   available and can be retrieved with [presence.getSelf][37].

Other users subscribed for this user's presence will receive a
   [presence:change][38] event.

**Parameters**

-   `status` **[string][7]** The status of the presence state.
-   `activity` **[string][7]** The activity to be shown as presence state
-   `note` **[string][7]?** An additional note to be provided when the activity is `presence.activities.ACTIVITIES_OTHER`.

### get

Retrieves the presence information for specified users, if available.

**Parameters**

-   `user` **([Array][12]&lt;[string][7]> | [string][7])** A User ID or an array of User IDs.

Returns **([Array][12]&lt;[Object][6]> | [Object][6])** List of user presence information.

### getAll

Retrieves the presence information for all available users.

Returns **[Array][12]&lt;[Object][6]>** List of user presence information.

### getSelf

Retrieves the presence information for the current user.

This information is set using the [presence.update][39] API.

Returns **[Object][6]** Presence information for the current user.

### fetch

Fetches presence information for the given users. This will refresh the
   available information with any new information from the server.

Available presence information an be retrieved using the
   [presence.get][32] or [presence.getAll][33] APIs.

**Parameters**

-   `user` **([Array][12]&lt;[string][7]> | [string][7])** A User ID or an array of User IDs.

### subscribe

Subscribe to another User's presence updates.

When the User updates their presence information, the SDK will emit a
   [presence:change][38] event.

**Parameters**

-   `users` **([Array][12]&lt;[string][7]> | [string][7])** A User ID or an array of User IDs.

### unsubscribe

Unsubscribe from another User's presence updates.

**Parameters**

-   `users` **([Array][12]&lt;[string][7]> | [string][7])** A User ID or an array of User IDs.

## promptUserMedia

Prompt the user for permission to use their audio and/or video devices.

**Parameters**

-   `options` **[Object][6]?** 
    -   `options.video` **[boolean][10]?** Whether to get permission for video.
    -   `options.audio` **[boolean][10]?** Whether to get permission for audio.

## sdpHandlers

A set of [SdpHandlerFunction][40]s for manipulating SDP information.
These handlers are used to customize low-level call behaviour for very specific
environments and/or scenarios. They can be provided during SDK instantiation
to be used for all calls.

**Examples**

```javascript
import { create, sdpHandlers } from 'kandy';
const codecRemover = sdpHandlers.createCodecRemover(['VP8', 'VP9'])
const client = create({
  call: {
    sdpHandlers: [ <Your-SDP-Handler-Function>, ...]
  }
})
```

### createCodecRemover

In some scenarios it's necessary to remove certain codecs being offered by the SDK to the remote party.
While creating an SDP handler would allow a user to perform this type of manipulation, it is a non-trivial task that requires in-depth knowledge of WebRTC SDP.

To facilitate this common task, the SDK provides a codec removal handler creator that can be used for this purpose.

The SDP handlers are exposed on the entry point of the SDK. They need to be added to the list of SDP handlers via configuration on creation of an instance of the SDK.

**Parameters**

-   `codecs` **[Array][12]&lt;[string][7]>** A list of codec names to remove from the SDP.

**Examples**

```javascript
import { create, sdpHandlers } from 'kandy';
const codecRemover = sdpHandlers.createCodecRemover(['VP8', 'VP9'])
const client = create({
  call: {
    sdpHandlers: [codecRemover]
  }
})
```

Returns **call.SdpHandlerFunction** The resulting SDP handler that will remove the codec.

## setDefaultDevices

Sets the selected devices as the default devices.
They will be used for audio output for future calls.
Changing speaker is supported on browser's that support HTMLMediaElement.setSinkId().

**Parameters**

-   `devices` **[Object][6]** 
    -   `devices.camera` **[string][7]?** The ID of the camera to set as default.
    -   `devices.microphone` **[string][7]?** The ID of the microphone to set as default.
    -   `devices.speaker` **[string][7]?** The ID of the speaker to set as default.

**Examples**

```javascript
// Set only the default microphone and camera.
client.media.setDefaultDevices({
    camera: 'abc123...',
    microphone: 'def456...'
});
```

## sip

The 'sip' namespace allows a user to subscribe to, and receive notifications for, sip events.

SipEvents functions are all part of this namespace.

### subscribe

Subscribe for a sip event.

**Parameters**

-   `eventType` **[string][7]** The sip event type to subscribe for.
-   `subscribeUserList` **[Array][12]** The list of users to subcribe to.
-   `clientCorrelator` **[string][7]** 
-   `customParameters` **[Array][12]?** List of custom options provided as part of the subscription.

### update

Update a subscription for a sip event.

**Parameters**

-   `eventType` **[string][7]** The sip event subscription to update.
-   `userLists` **[Object][6]** 
    -   `userLists.subscribeUserList` **[Array][12]** The list of users to subcribe to.
    -   `userLists.unsubscribeUserList` **[Array][12]** The list of users to unsubscribe from. If all users are unsubscribed from, the event subscription is removed completly.
-   `customParameters` **[Array][12]?** List of custom options provided as part of the subscription.

### unsubscribe

Unsubscribe from a sip event.

**Parameters**

-   `eventType` **[string][7]** The sip event to unsubscribe from.

### getDetails

Retrieve information about a specified sip event.

**Parameters**

-   `eventType` **[string][7]?** Type of sip event to retrieve.

Returns **[Object][6]** Returns all information related to the chosen eventType that is contained in the store. If no eventType is specified, it will return information for all eventTypes.

## startPreviewVideo

Starts the local video stream and displays it to the user.

**Parameters**

-   `videoContainer` **[HTMLElement][18]?** The container to use for local video.

**Examples**

````javascript
``` javascript
 var container = document.getElementById('local-video');
 client.media.startPreviewVideo(container);
```
````

## stopPreviewVideo

Stops the local video stream created in `startPreviewVideo`.

## user

The 'user' namespace allows access to user information for users within the same domain.

### User

The User data object.

Type: [Object][6]

**Properties**

-   `userId` **user.UserID** The User ID of the user.
-   `emailAddress` **[string][7]** The email address of the user.
-   `firstName` **[string][7]** The first name of the user.
-   `lastName` **[string][7]** The last name of the user.
-   `photoURL` **[string][7]** The URL to get the photo of the user.
-   `buddy` **[string][7]** Whether the user is a "buddy". Values can be "true" or "false".

### fetch

Fetches information about a User.

The SDK will emit a [users:change][41]
   event after the operation completes. The User's information will then
   be available.

Information about an available User can be retrieved using the
   [user.get][42] API.

**Parameters**

-   `userId` **[string][7]** The User ID of the user.

### fetchSelfInfo

Fetches information about the current User from directory.
Compared to [user.fetch][43] API, this API retrieves additional user related information.

The SDK will emit a [users:change][41]
   event after the operation completes. The User's information will then
   be available.

Information about an available User can be retrieved using the
   [user.get][42] API.

### get

Retrieves information about a User, if available.

See the [user.fetch][43] and [user.search][44] APIs for details about
   making Users' information available.

**Parameters**

-   `userId` **user.UserID** The User ID of the user.

Returns **[user.User][45]** The User object for the specified user.

### getAll

Retrieves information about all available Users.

See the [user.fetch][43] and [user.search][44] APIs for details about
   making Users' information available.

Returns **[Array][12]&lt;[user.User][45]>** An array of all the User objects.

### search

Searches the domain's directory for Users.

Directory searching only supports one filter. If multiple filters are provided, only one of the filters will be used for the search.
A search with no filters provided will return all users.

The SDK will emit a [directory:change][46]
   event after the operation completes. The search results will be
   provided as part of the event, and will also be available using the
   [user.get][42] and [user.getAll][47] APIs.

**Parameters**

-   `filters` **[Object][6]** The filter options for the search.
    -   `filters.userId` **user.UserID?** Matches the User ID of the user.
    -   `filters.name` **[string][7]?** Matches the firstName or lastName.
    -   `filters.firstName` **[string][7]?** Matches the firstName.
    -   `filters.lastName` **[string][7]?** Matches the lastName.
    -   `filters.userName` **[string][7]?** Matches the userName.
    -   `filters.phoneNumber` **[string][7]?** Matches the phoneNumber.

## voicemail

The 'voicemail' namespace is used to retrieve and view
voicemail indicators.

Voicemail functions are all part of this namespace.

### fetch

Attempts to retrieve voicemail information from the server.
A `voicemail:new` event is emitted upon completion.

### get

Returns voicemail data from the store.

[1]: #config

[2]: #api

[3]: #create

[4]: #loggerloghandler

[5]: #loggerlogentry

[6]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[7]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[8]: #loggerlevels

[9]: #loggerloghandler

[10]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[11]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[12]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[13]: https://en.wikipedia.org/wiki/Keepalive

[14]: #apibasicerror

[15]: #config

[16]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error

[18]: https://developer.mozilla.org/docs/Web/HTML/Element

[19]: #conversationconversation

[20]: #conversationconversationcreatemessage

[21]: conversation.Message.addPart

[22]: #conversationmessagesend

[23]: #conversationconversationgetmessages

[24]: #conversationconversationgetmessage

[25]: conversation.chatTypes

[26]: #conversationmessage

[27]: #configconfiglogs

[28]: api.notifications.process

[29]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[30]: #presencefetch

[31]: #presencesubscribe

[32]: #presenceget

[33]: #presencegetall

[34]: #presencestatuses

[35]: #presenceactivities

[36]: #presenceeventpresenceselfchange

[37]: #presencegetself

[38]: #presenceeventpresencechange

[39]: #presenceupdate

[40]: call.SdpHandlerFunction

[41]: #usereventuserschange

[42]: #userget

[43]: #userfetch

[44]: #usersearch

[45]: #useruser

[46]: #usereventdirectorychange

[47]: #usergetall
